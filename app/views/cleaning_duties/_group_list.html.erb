<div class="group_list">

  <%= form_with(url: cleaning_duty_update_group_path) do |f| %>

    <%= f.label :new_group_size, "グループ数" %> <br>
    <%= f.select :new_group_size, (1..20).to_a, { selected: @group_size }, class: 'form-control' %> <br>

    <%= f.submit "グループ数の指定", class: "btn btn-primary" %>

    <div><%= hidden_field_tag :group_size, @group_size %></div>
    
    <table>
      <thead>
        <tr>
          <th colspan="3">
            <h3><%= "グループ (生徒数:#{@student_size}人)" %></h3>
            <%= f.submit "生徒数の指定", class: "btn btn-primary" %>
          </th>
        </tr>
        <tr>
          <th>グループ名</th>
          <th>人数(男子)</th>
          <th>人数(女子)</th>
        </tr>
      </thead>
      <tbody>

          <% @group_size.to_i.times do |n| %>

            <% @boys_size  = flash["boys_size#{n+1}"] || 4 %>
            <% @girls_size = flash["girls_size#{n+1}"] || 4 %>

            <tr>
              <td>
                <%= "グループ#{n+1}" %> <br>
                <%= "男女(合計) #{@boys_size + @girls_size}人" %>
              </td>
              <td>
                <%= f.label "boys_size#{n+1}", "男子の数" %>
                <%= f.select "boys_size#{n+1}", (1..10).to_a, { selected: @boys_size }, class: 'input-num' %>
              </td>
              <td>
                <%= f.label "girls_size#{n+1}", "女子の数" %>
                <%= f.select "girls_size#{n+1}", (1..10).to_a, { selected: @girls_size }, class: 'input-num' %>
              </td>
            </tr>
          <% end %>
          
      </tbody>
    </table>

  <% end %>

</div>