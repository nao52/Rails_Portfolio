<%= form_with(url: cleaning_duty_update_path) do |f| %>

  <div><%= hidden_field_tag :group_size, @group_size %></div>
  
  <div class="group_list">

    <%= f.label :new_group_size, "グループ数" %> <br>
    <%= f.select :new_group_size, (1..20).to_a, { selected: @group_size }, class: 'form-control' %> <br>

    <%= f.submit "グループ数の指定", class: "btn btn-primary" %>
    
    <table>
      <thead>
        <tr>
          <th colspan="3">
            <h3><%= "グループ (生徒数:#{@student_size}人)" %></h3>
            <%= f.submit "グループのアップデート", class: "btn btn-primary" %>
          </th>
        </tr>
        <tr>
          <th>グループ名</th>
          <th>人数(男子)</th>
          <th>人数(女子)</th>
        </tr>
      </thead>
      <tbody>

          <% @group_size.to_i.times do |n| %>

            <% @boys_size  = @boys_sizes["#{n+1}"]  || 4 %>
            <% @girls_size = @girls_sizes["#{n+1}"] || 4 %>
            <% @group_name = @group_names["#{n+1}"] %>

            <tr>
              <td>
                <%= f.text_field "group_name#{n+1}", value: @group_name, placeholder: "掃除担当場所" %> <br>
                <%= "男女(合計) #{@boys_size + @girls_size}人" %>
              </td>
              <td>
                <%= f.label "boys_size#{n+1}", "男子の数" %>
                <%= f.select "boys_size#{n+1}", (1..10).to_a, { selected: @boys_size }, class: 'input-num' %>
              </td>
              <td>
                <%= f.label "girls_size#{n+1}", "女子の数" %>
                <%= f.select "girls_size#{n+1}", (1..10).to_a, { selected: @girls_size }, class: 'input-num' %>
              </td>
            </tr>
          <% end %>
          
      </tbody>
    </table>

  </div>

  <div class="students_list">

  <table>
    <thead>
      <tr>
        <th colspan="2">
          <h3><%= "生徒リスト (生徒数:#{@student_size}人)" %></h3>
          <%= f.submit "生徒情報のアップデート", class: "btn btn-primary" %>
        </th>
      </tr>
      <tr>
        <th>生徒名</th>
        <th>性別</th>
      </tr>
    </thead>
    <tbody>

      <% @student_size.to_i.times do |n| %>

        <% @student_name = @student_names["#{n+1}"] %>

        <tr>
          <td>
            <%= f.text_field "student_name#{n+1}", value: @student_name, placeholder: "生徒名" %> <br>
          </td>
          <td>男 or 女</td>
        </tr>  
      <% end %>
      
    </tbody>
  </table>

</div>

<% end %>