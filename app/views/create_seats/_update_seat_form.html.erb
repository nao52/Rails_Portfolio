<%= form_with(url: seat_update_path) do |f| %>

    <%= f.label :col, "横の席数" %> <br>
    <%= f.select :col, (1..8).to_a, { selected: @col }, class: 'form-control' %> <br>

    <%= f.label :row, "縦の席数" %> <br>
    <%= f.select :row, (1..8).to_a, { selected: @row }, class: 'form-control' %> <br>

    <table>
      <thead>
        <tr>
          <th colspan="<%= @col %>">
            <h3>
              席替えの自動生成
            </h3>
          </th>
        </tr>
      </thead>
      <tbody>
        <% @row.times do |i| %>
          <tr>
            <% @col.times do |j| %>

              <% @seat_no = (j+1) + (i*@col) %>
              <% @fixed_seat["#{@seat_no}"] = false if @fixed_seat["#{@seat_no}"].nil? %>
              <% @disabled_seat["#{@seat_no}"] = false if @disabled_seat["#{@seat_no}"].nil? %>
              
              <td>

                <% unless @disabled_seat["#{@seat_no}"] %>

                  <%= f.label "user_name#{@seat_no}", "生徒名(#{@seat_no})" %> <br>
                  <%= f.text_field "user_name#{@seat_no}", value: @names[(@seat_no)-1], class: 'form-control text-center' %> <br>

                  <%= f.label("fixed_seat#{@seat_no}", "座席の固定") %>
                  <%= f.check_box "fixed_seat#{@seat_no}", {checked: @fixed_seat["#{@seat_no}"]}, true, false %> <br>

                <% end %>

                <%= f.label("disable_seat#{@seat_no}", "使用しない") %>
                <%= f.check_box "disable_seat#{@seat_no}", {checked: @disabled_seat["#{@seat_no}"]}, true, false %> <br>
                  
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>

    <% if @names.any? { |name| name.present? } %>

      <div class="shuffle_btn">
        <%= f.label('shuffle', "座席のシャッフル") %>
        <%= f.check_box "shuffle", {checked: @shuffle}, true, false %> <br>
      </div>

    <% end %>

    <%= f.submit "座席の作成 / 座席のシャッフル", class: "btn btn-primary" %>

  <% end %>